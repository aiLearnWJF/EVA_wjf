{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Attach using Process Id",
            "type": "python",
            "request": "attach",
            "processId": "${command:pickProcess}",
            "justMyCode": true
        },
        {
            "name": "Python: Current File",
            "type": "python",
            "request": "launch",
            "python": "/vehicle/yckj3860/miniconda3/envs/py37_torch1_7_evaclip/bin/python",
            "program": "/vehicle/yckj3860/miniconda3/envs/py37_torch1_7_evaclip/lib/python3.7/site-packages/torch/distributed/launch.py",
            "cwd": "${workspaceRoot}/EVA-CLIP/rei",
            "console": "integratedTerminal",
            "justMyCode": false,
            "timeout": 60,
            "args": [
                "--nproc_per_node=1",
                "--nnodes=1",
                "--node_rank=0",
                "--master_addr=localhost",
                "--master_port=12357",
                "--use_env",
                    "training/main.py",
                    "--save-frequency=1",
                    "--zeroshot-frequency=5",
                    "--report-to=tensorboard",
                    "--wandb-project-name=eva-clip",
                    "--wandb-notes=eva02_clip_B_16",
                    "--train-num-samples=60000",
                    "--dataset-resampled",
                    "--train-data-list=/data2/opensource/LAION-400M/laion400m-data/{00000..00010}.tar",
                    "--dataset-type-list=webdataset",
                    "--imagenet-val=/vehicle/dataset/imagenet/val/",
                    "--warmup=2000",
                    "--batch-size=512",
                    "--epochs=5",
                    "--lr=5e-5",
                    "--visual-lr=1e-4",
                    "--text-lr=1e-5",
                    "--wd=0.05",
                    "--visual-wd=0.05",
                    "--text-wd=0.05",
                    "--ld=1.0",
                    "--visual-ld=0.75",
                    "--text-ld=0.75",
                    "--grad-clip-norm=5.0",
                    "--smoothing=0.",
                    "--workers=2",
                    "--model=EVA02-CLIP-B-16",
                    "--pretrained=/vehicle/yckj3860/code/EVA_wjf/pretrained/EVA02_CLIP_B_psz16_s8B.pt",
                    // "--skip-list='head.weight head.bias lm_head.weight lm_head.bias mask_token text_projection logit_scale'",
                    "--seed=4096",
                    "--gather-with-grad",
                    "--grad-checkpointing",
                    "--local-loss",
                    "--force-custom-clip",
                    "--force-patch-dropout=0.5",
                    "--optimizer=adam",
                    "--zero-stage=3",
                    "--grad-accumulation-steps=3",
                    "--log-every-n-steps=1",
                    "--enable-deepspeed",
            ],
            "env": {"CUDA_VISIBLE_DEVICES":"0,1,2,3,4,5,6,7","PYTHONPATH":"/vehicle/yckj3860/code/EVA_wjf/EVA-CLIP/rei"},
        },
        {
            "name": "Python2",
            "type": "python",
            "request": "launch",
            // "python": "/vehicle/yckj3860/miniconda3/envs/eva_clip/bin/python",
            "program": "/vehicle/yckj3860/miniconda3/envs/eva_clip/lib/python3.8/site-packages/torch/distributed/launch.py",
            "cwd": "${workspaceRoot}/EVA-CLIP/rei",
            // "console": "integratedTerminal",
            "justMyCode": false,
            "timeout":60,
            "args": [
                "--nproc_per_node=1",
                "--nnodes=1",
                "--node_rank=0",
                "--master_addr=localhost",
                "--master_port=12357",
                "--use_env",
                    "training/main.py",
                    // "--save-frequency=1",
                    // "--zeroshot-frequency=5",
                    // "--report-to='tensorboard'",
                    // "--wandb-project-name='eva-clip'",
                    // "--wandb-notes='eva02_clip_B_16'",
                    // "--train-num-samples=60000",
                    // "--dataset-resampled",
                    // "--train-data-list='/data2/opensource/LAION-400M/laion400m-data/{00000..00010}.tar'",
                    // "--dataset-type-list='webdataset'",
                    // "--imagenet-val='/vehicle/dataset/imagenet/val/'",
                    // "--warmup=2000",
                    // "--batch-size=512",
                    // "--epochs=5",
                    // "--lr=5e-5",
                    // "--visual-lr=1e-4",
                    // "--text-lr=1e-5",
                    // "--wd=0.05",
                    // "--visual-wd=0.05",
                    // "--text-wd=0.05",
                    // "--ld=1.0",
                    // "--visual-ld=0.75",
                    // "--text-ld=0.75",
                    // "--grad-clip-norm=5.0",
                    // "--smoothing=0.",
                    // "--workers=2",
                    // "--model='EVA02-CLIP-B-16'",
                    // "--pretrained='/vehicle/yckj3860/code/EVA_wjf/pretrained/EVA02_CLIP_B_psz16_s8B.pt'",
                    // // "--skip-list='head.weight head.bias lm_head.weight lm_head.bias mask_token text_projection logit_scale'",
                    // "--seed=4096",
                    // "--gather-with-grad",
                    // "--grad-checkpointing",
                    // "--local-loss",
                    // "--force-custom-clip",
                    // "--force-patch-dropout=0.5",
                    // "--optimizer='adam'",
                    // "--zero-stage=3",
                    // "--grad-accumulation-steps=2",
                    // "--log-every-n-steps=1",
                    // "--enable-deepspeed",
            ],
            "env": {"CUDA_VISIBLE_DEVICES":"0,1,2,3,4,5,6,7","PYTHONPATH":"/vehicle/yckj3860/code/EVA_wjf/EVA-CLIP/rei"},
        }
    ]
}